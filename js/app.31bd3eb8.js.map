{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?b7e4","webpack:///./src/App.vue?634d","webpack:///./src/components/game.vue?5b01","webpack:///./src/components/enums/gem.ts","webpack:///./src/components/constants.ts","webpack:///./src/components/enums/direction.ts","webpack:///./src/components/gem-drawer.ts","webpack:///./src/components/logic/point.ts","webpack:///./src/components/drawer.ts","webpack:///./src/components/logic/map-item.ts","webpack:///./src/components/logic/game-map.ts","webpack:///./src/components/game-core.ts","webpack:///./src/components/game.vue","webpack:///./src/components/game.vue?9fee","webpack:///./src/App.vue","webpack:///./src/App.vue?8ecf","webpack:///./src/registerServiceWorker.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_ctx","_cache","$props","$setup","$data","$options","_component_game","_resolveComponent","_openBlock","_createBlock","_createElementBlock","id","style","_normalizeStyle","width","height","Gem","MatrixSize","CanvasSize","CellMargin","CellPadding","CellOuterSize","CellInnerSize","FPS","FrameTime","Direction","GemDrawer","basePoint","context","beginPath","fillStyle","moveTo","x","y","lineTo","fill","radius","Point","this","round","Math","Drawer","canvas","document","getElementById","getContext","gemDrawer","setTransform","list","forEach","item","drawCellBg","drawMapItem","first","second","baseFirst","clone","baseSecond","animationTime","frames","wait","fillCell","fillBg","fallFrom","temp","filter","mapItem","absolutePoint","getAbsolutePosition","Red","drawRed","Green","drawGreen","Blue","drawBlue","Purple","drawPurple","Yellow","drawYellow","point","drawBorders","strokeRect","padding","cellInnerSize","fillRect","left","top","ms","Promise","resolve","setTimeout","MapItem","Clear","gems","allGems","randomValue","floor","random","keys","map","isNaN","newItem","GameMap","size","items","Array","concat","a","b","source","comboes","getMatchesByPoint","complemented","minPos","current","getFallFrom","setRandomValue","fallFromPoint","getItem","isPointInBounds","allowDuplicates","leftMatches","getMathcesByPointAndDirection","Left","rightMatches","Right","rowMatches","topMatches","Top","bottomMatches","Bottom","colMatches","totalMatches","base","dir","matches","match","GameCore","focused","matrix","drawingService","drawAll","getAll","boundaries","getBoundingClientRect","addEventListener","e","pick","offsetX","offsetY","touches","pageX","target","offsetLeft","pageY","offsetTop","cancel","move","getCoordinates","getSecondPoint","swap","getMatches","delete","mapItems","complement","fall","from","to","dx","dy","offset","posX","posY","cellX","cellY","Game","max","innerWidth","innerHeight","Vue","__exports__","App","Options","components","register","process","ready","console","log","registered","cached","updatefound","updated","offline","error","createApp","mount"],"mappings":"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","file":"js/app.31bd3eb8.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/matche-three/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=7b6bf1ce&lang=scss\"","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_game = _resolveComponent(\"game\")!\n\n  return (_openBlock(), _createBlock(_component_game))\n}","import { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"canvas\", {\n    id: \"map\",\n    style: _normalizeStyle({ width: _ctx.width + 'px', height: _ctx.height + 'px' })\n  }, null, 4))\n}","export enum Gem {\r\n   Clear,\r\n   Red,\r\n   Green,\r\n   Blue,\r\n   Yellow,\r\n   Purple,\r\n}\r\n","export const MatrixSize = 8;\r\nexport const CanvasSize = 1000;\r\nexport const CellMargin = 10;\r\nexport const CellPadding = 10;\r\nexport const CellOuterSize = (1000 - CellMargin * 2) / MatrixSize;\r\nexport const CellInnerSize = CellOuterSize - CellPadding * 2;\r\nexport const FPS = 30;\r\nexport const FrameTime = 1000 / FPS;\r\n","export enum Direction {\r\n   Left,\r\n   Top,\r\n   Right,\r\n   Bottom,\r\n}\r\n","import { CellInnerSize, CellPadding } from './constants';\r\nimport Point from './logic/point';\r\n\r\nexport default class GemDrawer {\r\n   drawRed(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      context.fillStyle = `#a25b5b`;\r\n      context.moveTo(basePoint.x + 4, basePoint.y + 5);\r\n      context.lineTo(basePoint.x + CellInnerSize - 4, basePoint.y + 5);\r\n      context.lineTo(basePoint.x + CellInnerSize / 2, basePoint.y + CellInnerSize);\r\n      context.fill();\r\n   }\r\n\r\n   drawGreen(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      context.fillStyle = `#3c8347`;\r\n      const radius = CellInnerSize / 4;\r\n      context.moveTo(basePoint.x + radius, basePoint.y);\r\n      context.lineTo(basePoint.x + CellInnerSize - radius, basePoint.y);\r\n      context.lineTo(basePoint.x + CellInnerSize, basePoint.y + radius);\r\n      context.lineTo(basePoint.x + CellInnerSize, basePoint.y + CellInnerSize - radius);\r\n      context.lineTo(basePoint.x + CellInnerSize - radius, basePoint.y + CellInnerSize);\r\n      context.lineTo(basePoint.x + radius, basePoint.y + CellInnerSize);\r\n      context.lineTo(basePoint.x, basePoint.y + CellInnerSize - radius);\r\n      context.lineTo(basePoint.x, basePoint.y + radius);\r\n      context.fill();\r\n   }\r\n\r\n   drawBlue(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      context.fillStyle = `#355a9a`;\r\n      const radius = CellInnerSize / 5;\r\n      context.moveTo(basePoint.x + CellInnerSize / 2, basePoint.y);\r\n      context.lineTo(basePoint.x + CellInnerSize - 10, basePoint.y + radius);\r\n      context.lineTo(basePoint.x + CellInnerSize - 10, basePoint.y + CellInnerSize - radius);\r\n      context.lineTo(basePoint.x + CellInnerSize / 2, basePoint.y + CellInnerSize);\r\n      context.lineTo(basePoint.x + 10, basePoint.y + CellInnerSize - radius);\r\n      context.lineTo(basePoint.x + 10, basePoint.y + radius);\r\n      context.fill();\r\n   }\r\n\r\n   drawPurple(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      context.fillStyle = `#6e3b7a`;\r\n      const radius = CellInnerSize / 5;\r\n      context.moveTo(basePoint.x + CellInnerSize / 2, basePoint.y);\r\n      context.lineTo(basePoint.x + CellInnerSize - 5, basePoint.y + radius + CellInnerSize / 7);\r\n      context.lineTo(basePoint.x + CellInnerSize - radius, basePoint.y + CellInnerSize - 3);\r\n      context.lineTo(basePoint.x + radius, basePoint.y + CellInnerSize - 3);\r\n      context.lineTo(basePoint.x + 5, basePoint.y + radius + CellInnerSize / 7);\r\n      context.fill();\r\n   }\r\n\r\n   drawYellow(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      context.fillStyle = `#e8cb8e`;\r\n      context.moveTo(basePoint.x + CellInnerSize / 2, basePoint.y);\r\n      context.lineTo(basePoint.x + CellInnerSize, basePoint.y + CellInnerSize / 2);\r\n      context.lineTo(basePoint.x + CellInnerSize / 2, basePoint.y + CellInnerSize);\r\n      context.lineTo(basePoint.x, basePoint.y + CellInnerSize / 2);\r\n      context.fill();\r\n   }\r\n}\r\n","export default class Point {\r\n   x: number;\r\n   y: number;\r\n\r\n   constructor(x: number, y: number) {\r\n      this.x = x;\r\n      this.y = y;\r\n      this.round();\r\n   }\r\n\r\n   round() {\r\n      this.x = Math.round(this.x);\r\n      this.y = Math.round(this.y);\r\n   }\r\n\r\n   clone() {\r\n      return new Point(this.x, this.y);\r\n   }\r\n}\r\n","import { CanvasSize, CellMargin, CellOuterSize, CellPadding, FPS, FrameTime, MatrixSize } from './constants';\r\nimport { Gem } from './enums/gem';\r\nimport GemDrawer from './gem-drawer';\r\nimport MapItem from './logic/map-item';\r\nimport Point from './logic/point';\r\n\r\nexport default class Drawer {\r\n   private readonly canvas: HTMLCanvasElement;\r\n   private readonly context: CanvasRenderingContext2D;\r\n   private readonly gemDrawer: GemDrawer;\r\n\r\n   constructor() {\r\n      this.canvas = document.getElementById('map') as HTMLCanvasElement;\r\n      this.context = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n      this.gemDrawer = new GemDrawer();\r\n\r\n      this.canvas.width = CanvasSize;\r\n      this.canvas.height = this.canvas.width;\r\n      this.context.setTransform(1, 0, 0, 1, 0, 0);\r\n   }\r\n\r\n   drawAll(list: MapItem[]) {\r\n      list.forEach((item) => {\r\n         this.drawCellBg(item as Point);\r\n         this.drawMapItem(item);\r\n      });\r\n   }\r\n\r\n   async swap(first: MapItem, second: MapItem) {\r\n      const baseFirst = first.clone();\r\n      const baseSecond = second.clone();\r\n      const animationTime = 100;\r\n      const frames = (FPS * animationTime) / 1000;\r\n      for (let i = 0; i < animationTime; i += FrameTime) {\r\n         this.drawCellBg(baseFirst);\r\n         this.drawCellBg(baseSecond);\r\n         second.x += (baseFirst.x - baseSecond.x) / frames;\r\n         second.y += (baseFirst.y - baseSecond.y) / frames;\r\n         first.x += (baseSecond.x - baseFirst.x) / frames;\r\n         first.y += (baseSecond.y - baseFirst.y) / frames;\r\n         this.drawMapItem(second);\r\n         this.drawMapItem(first);\r\n         await this.wait(FrameTime);\r\n      }\r\n      first.round();\r\n      second.round();\r\n   }\r\n\r\n   async delete(list: MapItem[]) {\r\n      const animationTime = 200;\r\n      const frames = animationTime / FrameTime;\r\n      for (let i = 0; i < frames; i++) {\r\n         list.forEach((item) => {\r\n            this.context.fillStyle = `rgba(255,255,255,${1 / frames})`;\r\n            this.fillCell(item);\r\n         });\r\n         await this.wait(FrameTime);\r\n      }\r\n      list.forEach((item) => this.fillBg(item));\r\n   }\r\n\r\n   async fall(list: MapItem[]) {\r\n      const maxFallTime = 1500;\r\n      while (list.length > 0) {\r\n         list.forEach((item) => {\r\n            item.fallFrom++;\r\n            const temp = item.clone();\r\n            temp.y = item.fallFrom;\r\n            this.fillBg(temp);\r\n            this.drawMapItem(temp);\r\n         });\r\n\r\n         list = list.filter((item) => item.y > item.fallFrom);\r\n\r\n         await this.wait(FrameTime);\r\n      }\r\n   }\r\n\r\n   drawMapItem(mapItem: MapItem) {\r\n      const absolutePoint = this.getAbsolutePosition(mapItem, CellPadding);\r\n      this.context.beginPath();\r\n      switch (mapItem.value) {\r\n         case Gem.Red:\r\n            return this.gemDrawer.drawRed(absolutePoint, this.context);\r\n         case Gem.Green:\r\n            return this.gemDrawer.drawGreen(absolutePoint, this.context);\r\n         case Gem.Blue:\r\n            return this.gemDrawer.drawBlue(absolutePoint, this.context);\r\n         case Gem.Purple:\r\n            return this.gemDrawer.drawPurple(absolutePoint, this.context);\r\n         case Gem.Yellow:\r\n            return this.gemDrawer.drawYellow(absolutePoint, this.context);\r\n      }\r\n   }\r\n\r\n   drawCellBg(point: Point) {\r\n      this.drawBorders(point);\r\n      this.fillBg(point);\r\n   }\r\n\r\n   fillBg(point: Point) {\r\n      this.context.fillStyle = '#fff';\r\n      this.fillCell(point);\r\n   }\r\n\r\n   drawBorders(point: Point) {\r\n      const absolutePoint = this.getAbsolutePosition(point);\r\n      this.context.strokeRect(absolutePoint.x, absolutePoint.y, CellOuterSize, CellOuterSize);\r\n   }\r\n\r\n   fillCell(point: Point) {\r\n      const padding = 1;\r\n      const cellInnerSize = CellOuterSize - padding * 2;\r\n      const absolutePoint = this.getAbsolutePosition(point, padding);\r\n      this.context.fillRect(absolutePoint.x, absolutePoint.y, cellInnerSize, cellInnerSize);\r\n   }\r\n\r\n   getAbsolutePosition(point: Point, padding = 0): Point {\r\n      const left = CellMargin + padding + CellOuterSize * point.x;\r\n      const top = CellMargin + padding + CellOuterSize * point.y;\r\n      return new Point(left, top);\r\n   }\r\n\r\n   wait(ms: number) {\r\n      return new Promise((resolve) => setTimeout(resolve, ms));\r\n   }\r\n}\r\n","import { Gem } from '../enums/gem';\r\nimport Point from './point';\r\n\r\nexport default class MapItem extends Point {\r\n   value: Gem = Gem.Clear;\r\n   fallFrom = 0;\r\n\r\n   setRandomValue(): void {\r\n      const gems = this.allGems();\r\n      const randomValue = Math.floor(Math.random() * gems.length);\r\n      this.value = gems[randomValue];\r\n   }\r\n\r\n   allGems(): Gem[] {\r\n      return Object.keys(Gem)\r\n         .map((x) => +x)\r\n         .filter((item) => !isNaN(item) && item !== Gem.Clear)\r\n         .map((x) => x as Gem);\r\n   }\r\n\r\n   clone(): MapItem {\r\n      const newItem = new MapItem(this.x, this.y);\r\n      newItem.value = this.value;\r\n      return newItem;\r\n   }\r\n}\r\n","import { Direction } from '../enums/direction';\r\nimport { Gem } from '../enums/gem';\r\nimport MapItem from './map-item';\r\nimport Point from './point';\r\n\r\nexport default class GameMap {\r\n   private items: MapItem[][] = [];\r\n   size: number;\r\n\r\n   constructor(size: number) {\r\n      this.size = size;\r\n   }\r\n\r\n   getItem(point: Point): MapItem {\r\n      return this.items[point.x][point.y];\r\n   }\r\n\r\n   getAll(): MapItem[] {\r\n      return Array.prototype.concat.apply([], this.items);\r\n   }\r\n\r\n   swap(a: Point, b: Point): void {\r\n      const temp = this.items[a.x][a.y];\r\n      this.items[a.x][a.y] = this.items[b.x][b.y];\r\n      this.items[b.x][b.y] = temp;\r\n   }\r\n\r\n   getMatches(source: Point[]): Point[] {\r\n      const comboes = source.map((x) => this.getMatchesByPoint(x));\r\n      return Array.prototype.concat.apply([], comboes);\r\n   }\r\n\r\n   delete(list: Point[]): void {\r\n      list.forEach((item) => (this.items[item.x][item.y].value = Gem.Clear));\r\n   }\r\n\r\n   complement(): MapItem[] {\r\n      const complemented: MapItem[] = [];\r\n      for (let i = 0; i < this.size; i++) {\r\n         let minPos = -1;\r\n         for (let j = 0; j < this.size; j++) {\r\n            const current = this.items[i][this.size - j - 1];\r\n            if (current.value !== Gem.Clear) continue;\r\n            current.fallFrom = this.getFallFrom(current, minPos);\r\n            if (current.fallFrom < 0) {\r\n               minPos--;\r\n               current.setRandomValue();\r\n            } else {\r\n               const fallFromPoint = this.getItem(new Point(i, current.fallFrom));\r\n               current.value = fallFromPoint.value;\r\n               fallFromPoint.value = Gem.Clear;\r\n            }\r\n            complemented.push(current);\r\n         }\r\n      }\r\n      return complemented;\r\n   }\r\n\r\n   getFallFrom(point: Point, minPos: number): number {\r\n      const temp = point.clone();\r\n      do temp.y--;\r\n      while (this.isPointInBounds(temp) && this.getItem(temp).value === Gem.Clear);\r\n      return temp.y < 0 ? minPos : temp.y;\r\n   }\r\n\r\n   fill(): void {\r\n      this.items = [];\r\n      for (let i = 0; i < this.size; i++) {\r\n         this.items.push([]);\r\n         for (let j = 0; j < this.size; j++) {\r\n            this.items[i].push(new MapItem(i, j));\r\n         }\r\n      }\r\n\r\n      for (let i = 0; i < this.size; i++) {\r\n         for (let j = 0; j < this.size; j++) {\r\n            const current = this.items[i][j];\r\n            do current.setRandomValue();\r\n            while (this.getMatchesByPoint(current).length !== 0);\r\n         }\r\n      }\r\n   }\r\n\r\n   getMatchesByPoint(current: Point): Point[] {\r\n      const allowDuplicates = 1;\r\n      const leftMatches = this.getMathcesByPointAndDirection(current, Direction.Left);\r\n      const rightMatches = this.getMathcesByPointAndDirection(current, Direction.Right);\r\n      const rowMatches = leftMatches.length + rightMatches.length > allowDuplicates ? leftMatches.concat(rightMatches) : [];\r\n      const topMatches = this.getMathcesByPointAndDirection(current, Direction.Top);\r\n      const bottomMatches = this.getMathcesByPointAndDirection(current, Direction.Bottom);\r\n      const colMatches = topMatches.length + bottomMatches.length > allowDuplicates ? topMatches.concat(bottomMatches) : [];\r\n      const totalMatches = rowMatches.length + colMatches.length > allowDuplicates ? rowMatches.concat(colMatches).concat(current) : [];\r\n      return totalMatches;\r\n   }\r\n\r\n   getMathcesByPointAndDirection(base: Point, dir: Direction): Point[] {\r\n      const matches: Point[] = [];\r\n      const temp = base.clone();\r\n      while (this.isPointInBounds(temp)) {\r\n         switch (dir) {\r\n            case Direction.Left:\r\n               temp.x--;\r\n               break;\r\n            case Direction.Right:\r\n               temp.x++;\r\n               break;\r\n            case Direction.Top:\r\n               temp.y--;\r\n               break;\r\n            case Direction.Bottom:\r\n               temp.y++;\r\n               break;\r\n         }\r\n         if (!this.match(base, temp)) break;\r\n         matches.push(temp.clone());\r\n      }\r\n      return matches;\r\n   }\r\n\r\n   isPointInBounds(point: Point): boolean {\r\n      return point.x >= 0 && point.y >= 0 && point.x < this.size && point.y < this.size;\r\n   }\r\n\r\n   match(a: Point, b: Point): boolean {\r\n      if (!this.isPointInBounds(a)) return false;\r\n      if (!this.isPointInBounds(b)) return false;\r\n      if (this.items[a.x][a.y].value === Gem.Clear) return false;\r\n      return this.items[a.x][a.y].value === this.items[b.x][b.y].value;\r\n   }\r\n}\r\n","import Drawer from './drawer';\r\nimport GameMap from './logic/game-map';\r\nimport Point from './logic/point';\r\nimport { CanvasSize, CellMargin, CellOuterSize, MatrixSize } from './constants';\r\nimport MapItem from './logic/map-item';\r\n\r\nexport default class GameCore {\r\n   private readonly drawingService: Drawer;\r\n   private readonly boundaries: DOMRect;\r\n\r\n   matrix: GameMap;\r\n   focused: Point | null = null;\r\n\r\n   constructor() {\r\n      this.matrix = new GameMap(MatrixSize);\r\n      this.drawingService = new Drawer();\r\n      this.matrix.fill();\r\n      this.drawingService.drawAll(this.matrix.getAll());\r\n\r\n      const map = document.getElementById('map') as HTMLElement;\r\n      this.boundaries = map.getBoundingClientRect();\r\n      map.addEventListener('mousedown', (e: any) => this.pick(new Point(e.offsetX, e.offsetY)));\r\n      map.addEventListener('touchstart', (e: any) => {\r\n         const first = e.touches[0];\r\n         const x = first.pageX - first.target.offsetLeft;\r\n         const y = first.pageY - first.target.offsetTop;\r\n         this.pick(new Point(x, y));\r\n      });\r\n\r\n      document.addEventListener('mouseup', () => this.cancel());\r\n      document.addEventListener('touchend', () => this.cancel());\r\n      map.addEventListener('mousemove', (e: any) => {\r\n         const point = new Point(e.offsetX, e.offsetY);\r\n         this.move(point);\r\n      });\r\n      map.addEventListener('touchmove', (e: any) => {\r\n         const first = e.touches[0];\r\n         const x = first.pageX - first.target.offsetLeft;\r\n         const y = first.pageY - first.target.offsetTop;\r\n         this.move(new Point(x, y));\r\n      });\r\n   }\r\n\r\n   pick(point: Point) {\r\n      this.focused = this.getCoordinates(point);\r\n      if (this.focused === null) return;\r\n      this.drawingService.drawMapItem(this.matrix.getItem(this.focused));\r\n   }\r\n\r\n   async move(point: Point) {\r\n      if (this.focused === null) return;\r\n      const temp = this.getCoordinates(point);\r\n      if (temp === null) return;\r\n      const first = this.focused.clone();\r\n      const second = this.getSecondPoint(first, temp);\r\n      if (second === null) return;\r\n      this.focused = null;\r\n\r\n      await this.drawingService.swap(this.matrix.getItem(first), this.matrix.getItem(second));\r\n      this.matrix.swap(this.matrix.getItem(first), this.matrix.getItem(second));\r\n      const matches = this.matrix.getMatches([first, second]);\r\n      if (matches.length === 0) {\r\n         await this.drawingService.swap(this.matrix.getItem(first), this.matrix.getItem(second));\r\n         this.matrix.swap(first, second);\r\n         return;\r\n      }\r\n\r\n      await this.delete(matches);\r\n   }\r\n\r\n   async delete(matches: Point[]) {\r\n      while (matches.length > 0) {\r\n         const mapItems = matches.map((x) => this.matrix.getItem(x));\r\n         await this.drawingService.delete(mapItems);\r\n         this.matrix.delete(matches);\r\n         const complemented = this.matrix.complement();\r\n         await this.drawingService.fall(complemented);\r\n         matches = this.matrix.getMatches(complemented);\r\n      }\r\n   }\r\n\r\n   getSecondPoint(from: Point, to: Point): Point | null {\r\n      const dx = to.x - from.x;\r\n      const dy = to.y - from.y;\r\n      if (dx === 0 && dy === 0) return null;\r\n\r\n      const second = from.clone();\r\n      if (dx < 0) second.x--;\r\n      else if (dx > 0) second.x++;\r\n      else if (dy < 0) second.y--;\r\n      else if (dy > 0) second.y++;\r\n      return second;\r\n   }\r\n\r\n   cancel(): void {\r\n      if (this.focused === null) return;\r\n      this.drawingService.drawMapItem(this.matrix.getItem(this.focused));\r\n      this.focused = null;\r\n   }\r\n\r\n   getCoordinates(offset: Point): Point | null {\r\n      const posX = ((offset.x - CellMargin) * CanvasSize) / this.boundaries.width;\r\n      const posY = ((offset.y - CellMargin) * CanvasSize) / this.boundaries.height;\r\n      const cellX = posX / CellOuterSize;\r\n      const cellY = posY / CellOuterSize;\r\n      if (cellX < 0 || cellY < 0 || cellX >= MatrixSize || cellY >= MatrixSize) return null;\r\n\r\n      return new Point(Math.floor(cellX), Math.floor(cellY));\r\n   }\r\n}\r\n","\nimport { Vue } from 'vue-class-component';\nimport GameCore from './game-core';\n\nexport default class Game extends Vue {\n   width = 300;\n   height = 300;\n\n   created() {\n      const max = window.innerWidth > window.innerHeight ? window.innerHeight : window.innerWidth;\n      this.width = max;\n      this.height = max;\n   }\n\n   mounted() {\n      const core = new GameCore();\n   }\n}\n","import { render } from \"./game.vue?vue&type=template&id=0077e0cc&ts=true\"\nimport script from \"./game.vue?vue&type=script&lang=ts\"\nexport * from \"./game.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\Sharp\\\\match-three\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { Options, Vue } from 'vue-class-component';\nimport Game from './components/game.vue';\n\n@Options({\n   components: { Game },\n})\nexport default class App extends Vue {}\n","import { render } from \"./App.vue?vue&type=template&id=7b6bf1ce&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=7b6bf1ce&lang=scss\"\n\nimport exportComponent from \"D:\\\\Sharp\\\\match-three\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/* eslint-disable no-console */\n\nimport { register } from \"register-service-worker\";\n\nif (process.env.NODE_ENV === \"production\") {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready() {\n      console.log(\n        \"App is being served from cache by a service worker.\\n\" +\n          \"For more details, visit https://goo.gl/AFskqB\"\n      );\n    },\n    registered() {\n      console.log(\"Service worker has been registered.\");\n    },\n    cached() {\n      console.log(\"Content has been cached for offline use.\");\n    },\n    updatefound() {\n      console.log(\"New content is downloading.\");\n    },\n    updated() {\n      console.log(\"New content is available; please refresh.\");\n    },\n    offline() {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    },\n    error(error) {\n      console.error(\"Error during service worker registration:\", error);\n    },\n  });\n}\n","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport \"./registerServiceWorker\";\n\ncreateApp(App).mount(\"#app\");\n"],"sourceRoot":""}