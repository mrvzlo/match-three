(function(e){function t(t){for(var r,o,s=t[0],u=t[1],c=t[2],h=0,f=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/match-three/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0755":function(e,t,n){},"4ed4":function(e,t,n){"use strict";n("0755")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function i(e,t,n,i,a,o){var s=Object(r["h"])("game");return Object(r["e"])(),Object(r["b"])(s)}var a=n("bee2"),o=n("d4ec"),s=n("262e"),u=n("2caf"),c=n("9ab4"),l=n("ce1f");function h(e,t,n,i,a,o){return Object(r["e"])(),Object(r["c"])("canvas",{id:"map",style:Object(r["d"])({width:e.width+"px",height:e.height+"px"})},null,4)}var f,d=n("1da1"),v=(n("96cf"),n("cb29"),n("d81d"),n("d3b7"),n("159b"),n("4de4"),8),y=1e3,m=10,g=10,p=(1e3-2*m)/v,w=p-2*g,x=30,b=1e3/x;(function(e){e[e["Clear"]=0]="Clear",e[e["Red"]=1]="Red",e[e["Green"]=2]="Green",e[e["Blue"]=3]="Blue",e[e["Yellow"]=4]="Yellow",e[e["Purple"]=5]="Purple"})(f||(f={}));var k,O=function(){function e(){Object(o["a"])(this,e)}return Object(a["a"])(e,[{key:"drawRed",value:function(e,t){t.beginPath(),t.fillStyle="#a25b5b",t.moveTo(e.x+4,e.y+5),t.lineTo(e.x+w-4,e.y+5),t.lineTo(e.x+w/2,e.y+w),t.fill()}},{key:"drawGreen",value:function(e,t){t.beginPath(),t.fillStyle="#3c8347";var n=w/4;t.moveTo(e.x+n,e.y),t.lineTo(e.x+w-n,e.y),t.lineTo(e.x+w,e.y+n),t.lineTo(e.x+w,e.y+w-n),t.lineTo(e.x+w-n,e.y+w),t.lineTo(e.x+n,e.y+w),t.lineTo(e.x,e.y+w-n),t.lineTo(e.x,e.y+n),t.fill()}},{key:"drawBlue",value:function(e,t){t.beginPath(),t.fillStyle="#355a9a";var n=w/5;t.moveTo(e.x+w/2,e.y),t.lineTo(e.x+w-10,e.y+n),t.lineTo(e.x+w-10,e.y+w-n),t.lineTo(e.x+w/2,e.y+w),t.lineTo(e.x+10,e.y+w-n),t.lineTo(e.x+10,e.y+n),t.fill()}},{key:"drawPurple",value:function(e,t){t.beginPath(),t.fillStyle="#6e3b7a";var n=w/5;t.moveTo(e.x+w/2,e.y),t.lineTo(e.x+w-5,e.y+n+w/7),t.lineTo(e.x+w-n,e.y+w-3),t.lineTo(e.x+n,e.y+w-3),t.lineTo(e.x+5,e.y+n+w/7),t.fill()}},{key:"drawYellow",value:function(e,t){t.beginPath(),t.fillStyle="#e8cb8e",t.moveTo(e.x+w/2,e.y),t.lineTo(e.x+w,e.y+w/2),t.lineTo(e.x+w/2,e.y+w),t.lineTo(e.x,e.y+w/2),t.fill()}}]),e}(),j=function(){function e(t,n){Object(o["a"])(this,e),this.x=t,this.y=n,this.round()}return Object(a["a"])(e,[{key:"round",value:function(){this.x=Math.round(this.x),this.y=Math.round(this.y)}},{key:"clone",value:function(){return new e(this.x,this.y)}}]),e}(),P=function(){function e(){Object(o["a"])(this,e),this.canvas=document.getElementById("map"),this.context=this.canvas.getContext("2d"),this.gemDrawer=new O,this.canvas.width=y,this.canvas.height=this.canvas.width,this.context.setTransform(1,0,0,1,0,0)}return Object(a["a"])(e,[{key:"drawAll",value:function(e){var t=this;e.forEach((function(e){t.drawCellBg(e),t.drawMapItem(e)}))}},{key:"swap",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.clone(),i=n.clone(),a=100,o=x*a/1e3,s=0;case 5:if(!(s<a)){e.next=19;break}return this.drawCellBg(r),this.drawCellBg(i),n.x+=(r.x-i.x)/o,n.y+=(r.y-i.y)/o,t.x+=(i.x-r.x)/o,t.y+=(i.y-r.y)/o,this.drawMapItem(n),this.drawMapItem(t),e.next=16,this.wait(b);case 16:s+=b,e.next=5;break;case 19:t.round(),n.round();case 21:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=200,r=n/b,i=0;case 3:if(!(i<r)){e.next=10;break}return t.forEach((function(e){a.context.fillStyle="rgba(255,255,255,".concat(1/r,")"),a.fillCell(e)})),e.next=7,this.wait(b);case 7:i++,e.next=3;break;case 10:t.forEach((function(e){return a.fillBg(e)}));case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fall",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:1500;case 1:if(!(t.length>0)){e.next=8;break}return t.forEach((function(e){e.fallFrom++;var t=e.clone();t.y=e.fallFrom,n.fillBg(t),n.drawMapItem(t)})),t=t.filter((function(e){return e.y>e.fallFrom})),e.next=6,this.wait(b);case 6:e.next=1;break;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"drawMapItem",value:function(e){var t=this.getAbsolutePosition(e,g);switch(this.context.beginPath(),e.value){case f.Red:return this.gemDrawer.drawRed(t,this.context);case f.Green:return this.gemDrawer.drawGreen(t,this.context);case f.Blue:return this.gemDrawer.drawBlue(t,this.context);case f.Purple:return this.gemDrawer.drawPurple(t,this.context);case f.Yellow:return this.gemDrawer.drawYellow(t,this.context)}}},{key:"drawCellBg",value:function(e){this.drawBorders(e),this.fillBg(e)}},{key:"fillBg",value:function(e){this.context.fillStyle="#fff",this.fillCell(e)}},{key:"drawBorders",value:function(e){var t=this.getAbsolutePosition(e);this.context.strokeRect(t.x,t.y,p,p)}},{key:"fillCell",value:function(e){var t=1,n=p-2*t,r=this.getAbsolutePosition(e,t);this.context.fillRect(r.x,r.y,n,n)}},{key:"getAbsolutePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=m+t+p*e.x,r=m+t+p*e.y;return new j(n,r)}},{key:"wait",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}]),e}();n("99af"),n("ac1f"),n("466d");(function(e){e[e["Left"]=0]="Left",e[e["Top"]=1]="Top",e[e["Right"]=2]="Right",e[e["Bottom"]=3]="Bottom"})(k||(k={}));n("b64b");var B=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.value=f.Clear,e.fallFrom=0,e}return Object(a["a"])(n,[{key:"setRandomValue",value:function(){var e=this.allGems(),t=Math.floor(Math.random()*e.length);this.value=e[t]}},{key:"allGems",value:function(){return Object.keys(f).map((function(e){return+e})).filter((function(e){return!isNaN(e)&&e!==f.Clear})).map((function(e){return e}))}},{key:"clone",value:function(){var e=new n(this.x,this.y);return e.value=this.value,e}}]),n}(j),T=function(){function e(t){Object(o["a"])(this,e),this.items=[],this.size=t}return Object(a["a"])(e,[{key:"getItem",value:function(e){return this.items[e.x][e.y]}},{key:"getAll",value:function(){return Array.prototype.concat.apply([],this.items)}},{key:"swap",value:function(e,t){var n=this.items[e.x][e.y];this.items[e.x][e.y]=this.items[t.x][t.y],this.items[t.x][t.y]=n}},{key:"getMatches",value:function(e){var t=this,n=e.map((function(e){return t.getMatchesByPoint(e)}));return Array.prototype.concat.apply([],n)}},{key:"delete",value:function(e){var t=this;e.forEach((function(e){return t.items[e.x][e.y].value=f.Clear}))}},{key:"complement",value:function(){for(var e=[],t=0;t<this.size;t++)for(var n=-1,r=0;r<this.size;r++){var i=this.items[t][this.size-r-1];if(i.value===f.Clear){if(i.fallFrom=this.getFallFrom(i,n),i.fallFrom<0)n--,i.setRandomValue();else{var a=this.getItem(new j(t,i.fallFrom));i.value=a.value,a.value=f.Clear}e.push(i)}}return e}},{key:"getFallFrom",value:function(e,t){var n=e.clone();do{n.y--}while(this.isPointInBounds(n)&&this.getItem(n).value===f.Clear);return n.y<0?t:n.y}},{key:"fill",value:function(){this.items=[];for(var e=0;e<this.size;e++){this.items.push([]);for(var t=0;t<this.size;t++)this.items[e].push(new B(e,t))}for(var n=0;n<this.size;n++)for(var r=0;r<this.size;r++){var i=this.items[n][r];do{i.setRandomValue()}while(0!==this.getMatchesByPoint(i).length)}}},{key:"getMatchesByPoint",value:function(e){var t=1,n=this.getMathcesByPointAndDirection(e,k.Left),r=this.getMathcesByPointAndDirection(e,k.Right),i=n.length+r.length>t?n.concat(r):[],a=this.getMathcesByPointAndDirection(e,k.Top),o=this.getMathcesByPointAndDirection(e,k.Bottom),s=a.length+o.length>t?a.concat(o):[],u=i.length+s.length>t?i.concat(s).concat(e):[];return u}},{key:"getMathcesByPointAndDirection",value:function(e,t){var n=[],r=e.clone();while(this.isPointInBounds(r)){switch(t){case k.Left:r.x--;break;case k.Right:r.x++;break;case k.Top:r.y--;break;case k.Bottom:r.y++;break}if(!this.match(e,r))break;n.push(r.clone())}return n}},{key:"isPointInBounds",value:function(e){return e.x>=0&&e.y>=0&&e.x<this.size&&e.y<this.size}},{key:"match",value:function(e,t){return!!this.isPointInBounds(e)&&(!!this.isPointInBounds(t)&&(this.items[e.x][e.y].value!==f.Clear&&this.items[e.x][e.y].value===this.items[t.x][t.y].value))}}]),e}(),M=function(){function e(){var t=this;Object(o["a"])(this,e),this.focused=null,this.matrix=new T(v),this.drawingService=new P,this.matrix.fill(),this.drawingService.drawAll(this.matrix.getAll());var n=document.getElementById("map");this.boundaries=n.getBoundingClientRect(),n.addEventListener("mousedown",(function(e){return t.pick(new j(e.offsetX,e.offsetY))})),n.addEventListener("touchstart",(function(e){var n=e.touches[0],r=n.pageX-n.target.offsetLeft,i=n.pageY-n.target.offsetTop;t.pick(new j(r,i))})),document.addEventListener("mouseup",(function(){return t.cancel()})),document.addEventListener("touchend",(function(){return t.cancel()})),n.addEventListener("mousemove",(function(e){var n=new j(e.offsetX,e.offsetY);t.move(n)})),n.addEventListener("touchmove",(function(e){var n=e.touches[0],r=n.pageX-n.target.offsetLeft,i=n.pageY-n.target.offsetTop;t.move(new j(r,i))}))}return Object(a["a"])(e,[{key:"pick",value:function(e){this.focused=this.getCoordinates(e),null!==this.focused&&this.drawingService.drawMapItem(this.matrix.getItem(this.focused))}},{key:"move",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==this.focused){e.next=2;break}return e.abrupt("return");case 2:if(n=this.getCoordinates(t),null!==n){e.next=5;break}return e.abrupt("return");case 5:if(r=this.focused.clone(),i=this.getSecondPoint(r,n),null!==i){e.next=9;break}return e.abrupt("return");case 9:return this.focused=null,e.next=12,this.drawingService.swap(this.matrix.getItem(r),this.matrix.getItem(i));case 12:if(this.matrix.swap(this.matrix.getItem(r),this.matrix.getItem(i)),a=this.matrix.getMatches([r,i]),0!==a.length){e.next=19;break}return e.next=17,this.drawingService.swap(this.matrix.getItem(r),this.matrix.getItem(i));case 17:return this.matrix.swap(r,i),e.abrupt("return");case 19:return e.next=21,this.delete(a);case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=11;break}return n=t.map((function(e){return i.matrix.getItem(e)})),e.next=4,this.drawingService.delete(n);case 4:return this.matrix.delete(t),r=this.matrix.complement(),e.next=8,this.drawingService.fall(r);case 8:t=this.matrix.getMatches(r),e.next=0;break;case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSecondPoint",value:function(e,t){var n=t.x-e.x,r=t.y-e.y;if(0===n&&0===r)return null;var i=e.clone();return n<0?i.x--:n>0?i.x++:r<0?i.y--:r>0&&i.y++,i}},{key:"cancel",value:function(){null!==this.focused&&(this.drawingService.drawMapItem(this.matrix.getItem(this.focused)),this.focused=null)}},{key:"getCoordinates",value:function(e){var t=(e.x-m)*y/this.boundaries.width,n=(e.y-m)*y/this.boundaries.height,r=t/p,i=n/p;return r<0||i<0||r>=v||i>=v?null:new j(Math.floor(r),Math.floor(i))}}]),e}(),I=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.apply(this,arguments),e.width=300,e.height=300,e}return Object(a["a"])(n,[{key:"created",value:function(){var e=window.innerWidth>window.innerHeight?window.innerHeight:window.innerWidth;this.width=e,this.height=e}},{key:"mounted",value:function(){new M}}]),n}(l["b"]),R=n("6b0d"),S=n.n(R);const C=S()(I,[["render",h]]);var A=C,E=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(o["a"])(this,n),t.apply(this,arguments)}return Object(a["a"])(n)}(l["b"]);E=Object(c["a"])([Object(l["a"])({components:{Game:A}})],E);var F=E;n("4ed4");const L=S()(F,[["render",i]]);var D=L,z=n("9483");Object(z["a"])("".concat("/match-three/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),Object(r["a"])(D).mount("#app")}});
//# sourceMappingURL=app.84bff085.js.map