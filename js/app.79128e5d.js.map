{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?b7e4","webpack:///./src/App.vue?634d","webpack:///./src/components/game.vue?413f","webpack:///./src/components/enums/direction.ts","webpack:///./src/components/enums/gem.ts","webpack:///./src/components/constants.ts","webpack:///./src/components/logic/point.ts","webpack:///./src/components/drawing/gem-drawing.service.ts","webpack:///./src/components/drawing/drawing.service.ts","webpack:///./src/components/logic/map-item.ts","webpack:///./src/components/logic/game-map.ts","webpack:///./src/components/game-core.ts","webpack:///./src/components/game.vue","webpack:///./src/components/game.vue?9fee","webpack:///./src/App.vue","webpack:///./src/App.vue?8ecf","webpack:///./src/registerServiceWorker.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_ctx","_cache","$props","$setup","$data","$options","_component_game","_resolveComponent","_openBlock","_createBlock","_createElementBlock","_Fragment","_createElementVNode","id","style","_normalizeStyle","width","height","Direction","Gem","MatrixSize","CanvasSize","CellMargin","CellPadding","CellOuterSize","CellInnerSize","FPS","FrameTime","Point","x","y","this","_x","_y","round","Math","dir","Left","Right","Top","Bottom","GemDrawingService","basePoint","context","path","fillStyle","drawPolygon","radius","fillPolygon","lineWidth","strokeStyle","stroke","beginPath","list","applyBasePoint","first","moveTo","forEach","point","lineTo","fill","map","item","DrawingService","gemsCanvas","document","getElementById","gemsContext","getContext","bgCanvas","bgContext","gemDrawer","setTransform","drawBorders","clearCell","drawMapItem","second","baseFirst","clone","baseSecond","tempFirst","tempSecond","animationTime","frames","wait","fillBg","drawErrosion","fallFrom","temp","setY","filter","mapItem","absolutePoint","getAbsolutePosition","Red","drawRed","Green","drawGreen","Blue","drawBlue","Purple","drawPurple","Yellow","drawYellow","borderWidth","clearRect","percent","padding","cellInnerSize","bgValue","fillCell","strokeRect","fillRect","left","top","ms","Promise","resolve","setTimeout","MapItem","Clear","gems","allGems","randomValue","floor","random","keys","isNaN","newItem","GameMap","size","items","Array","concat","a","b","itemA","getItem","itemB","source","comboes","getMatchesByPoint","toggleBgValue","clear","complemented","minPos","current","getFallFrom","setRandomValue","fallFromPoint","isPointInBounds","allowDuplicates","leftMatches","getMathcesByPointAndDirection","rightMatches","rowMatches","topMatches","bottomMatches","colMatches","totalMatches","base","matches","match","GameCore","lock","focused","matrix","drawingService","drawAll","getAll","boundaries","getBoundingClientRect","addEventListener","e","pick","offsetX","offsetY","getPointFromToches","move","cancel","event","firstTouch","touches","parent","target","innerWidth","offsetWidth","innerHeight","offsetHeight","pageX","pageY","getCoordinates","getSecondPoint","swap","getMatches","delete","mapItems","toggleBg","complement","fall","from","to","dx","dy","direction","offset","posX","posY","cellX","cellY","Game","max","Vue","__exports__","App","Options","components","register","process","ready","console","log","registered","cached","updatefound","updated","offline","error","createApp","mount"],"mappings":"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","file":"js/app.79128e5d.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/match-three/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=7b6bf1ce&lang=scss\"","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_game = _resolveComponent(\"game\")!\n\n  return (_openBlock(), _createBlock(_component_game))\n}","import { normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"canvas\", {\n      id: \"back\",\n      style: _normalizeStyle({ width: _ctx.width + 'px', height: _ctx.height + 'px' })\n    }, null, 4),\n    _createElementVNode(\"canvas\", {\n      id: \"gems\",\n      style: _normalizeStyle({ width: _ctx.width + 'px', height: _ctx.height + 'px' })\n    }, null, 4)\n  ], 64))\n}","export enum Direction {\r\n   Left,\r\n   Top,\r\n   Right,\r\n   Bottom,\r\n}\r\n","export enum Gem {\r\n   Clear,\r\n   Red,\r\n   Green,\r\n   Blue,\r\n   Yellow,\r\n   Purple,\r\n}\r\n","export const MatrixSize = 8;\r\nexport const CanvasSize = 1000;\r\nexport const CellMargin = 10;\r\nexport const CellPadding = 10;\r\nexport const CellOuterSize = (1000 - CellMargin * 2) / MatrixSize;\r\nexport const CellInnerSize = CellOuterSize - CellPadding * 2;\r\nexport const FPS = 30;\r\nexport const FrameTime = 1000 / FPS;\r\n","import { Direction } from '../enums/direction';\r\n\r\nexport default class Point {\r\n   private _x: number;\r\n   private _y: number;\r\n\r\n   get x(): number {\r\n      return this._x;\r\n   }\r\n\r\n   get y(): number {\r\n      return this._y;\r\n   }\r\n\r\n   constructor(x: number, y: number) {\r\n      this._x = x;\r\n      this._y = y;\r\n      this.round();\r\n   }\r\n\r\n   round() {\r\n      this._x = Math.round(this.x);\r\n      this._y = Math.round(this.y);\r\n   }\r\n\r\n   clone() {\r\n      return new Point(this.x, this.y);\r\n   }\r\n\r\n   shift(dir: Direction, value = 1) {\r\n      switch (dir) {\r\n         case Direction.Left:\r\n            this._x -= value;\r\n            return;\r\n         case Direction.Right:\r\n            this._x += value;\r\n            return;\r\n         case Direction.Top:\r\n            this._y -= value;\r\n            return;\r\n         case Direction.Bottom:\r\n            this._y += value;\r\n            return;\r\n      }\r\n   }\r\n\r\n   setY(value: number) {\r\n      this._y = value;\r\n   }\r\n}\r\n","import { CellInnerSize, CellOuterSize } from '../constants';\r\nimport Point from '../logic/point';\r\n\r\nexport default class GemDrawingService {\r\n   drawRed(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      const path = [new Point(4, 5), new Point(CellInnerSize - 4, 5), new Point(CellInnerSize / 2, CellInnerSize)];\r\n      context.fillStyle = `#a55`;\r\n      this.drawPolygon(basePoint, path, context);\r\n   }\r\n\r\n   drawGreen(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      const radius = CellInnerSize / 4;\r\n      const path = [\r\n         new Point(radius, 0),\r\n         new Point(CellInnerSize - radius, 0),\r\n         new Point(CellInnerSize, radius),\r\n         new Point(CellInnerSize, CellInnerSize - radius),\r\n         new Point(CellInnerSize - radius, CellInnerSize),\r\n         new Point(radius, CellInnerSize),\r\n         new Point(0, CellInnerSize - radius),\r\n         new Point(0, radius),\r\n      ];\r\n      context.fillStyle = `#485`;\r\n      this.drawPolygon(basePoint, path, context);\r\n   }\r\n\r\n   drawBlue(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      const radius = CellInnerSize / 5;\r\n      const path = [\r\n         new Point(CellInnerSize / 2, 0),\r\n         new Point(CellInnerSize - 10, radius),\r\n         new Point(CellInnerSize - 10, CellInnerSize - radius),\r\n         new Point(CellInnerSize / 2, CellInnerSize),\r\n         new Point(10, CellInnerSize - radius),\r\n         new Point(10, radius),\r\n      ];\r\n      context.fillStyle = `#35a`;\r\n      this.drawPolygon(basePoint, path, context);\r\n   }\r\n\r\n   drawPurple(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      const radius = CellInnerSize / 5;\r\n      const path = [\r\n         new Point(CellInnerSize / 2, 0),\r\n         new Point(CellInnerSize - 5, radius + CellInnerSize / 7),\r\n         new Point(CellInnerSize - radius, CellInnerSize - 3),\r\n         new Point(radius, CellInnerSize - 3),\r\n         new Point(5, radius + CellInnerSize / 7),\r\n      ];\r\n      context.fillStyle = `#6e3b7a`;\r\n      this.drawPolygon(basePoint, path, context);\r\n   }\r\n\r\n   drawYellow(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      const path = [\r\n         new Point(CellInnerSize / 2, 0),\r\n         new Point(CellInnerSize, CellInnerSize / 2),\r\n         new Point(CellInnerSize / 2, CellInnerSize),\r\n         new Point(0, CellInnerSize / 2),\r\n      ];\r\n      context.fillStyle = `#ec7`;\r\n      this.drawPolygon(basePoint, path, context);\r\n   }\r\n\r\n   drawPolygon(basePoint: Point, path: Point[], context: CanvasRenderingContext2D) {\r\n      this.fillPolygon(basePoint, path, context);\r\n      context.lineWidth = 3;\r\n      context.strokeStyle = '#333';\r\n      context.stroke();\r\n   }\r\n\r\n   fillPolygon(basePoint: Point, path: Point[], context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      const list = this.applyBasePoint(basePoint, path);\r\n      const first = list.shift() as Point;\r\n      context.moveTo(first.x, first.y);\r\n      list.forEach((point) => context.lineTo(point.x, point.y));\r\n      context.lineTo(first.x, first.y);\r\n      context.fill();\r\n   }\r\n\r\n   applyBasePoint(basePoint: Point, list: Point[]): Point[] {\r\n      return list.map((item) => new Point(item.x + basePoint.x, item.y + basePoint.y));\r\n   }\r\n}\r\n","import { CanvasSize, CellInnerSize, CellMargin, CellOuterSize, CellPadding, FPS, FrameTime, MatrixSize } from '../constants';\r\nimport { Direction } from '../enums/direction';\r\nimport { Gem } from '../enums/gem';\r\nimport GemDrawingService from './gem-drawing.service';\r\nimport MapItem from '../logic/map-item';\r\nimport Point from '../logic/point';\r\n\r\nexport default class DrawingService {\r\n   private readonly gemsContext: CanvasRenderingContext2D;\r\n   private readonly bgContext: CanvasRenderingContext2D;\r\n   private readonly gemDrawer: GemDrawingService;\r\n\r\n   constructor() {\r\n      const gemsCanvas = document.getElementById('gems') as HTMLCanvasElement;\r\n      this.gemsContext = gemsCanvas.getContext('2d') as CanvasRenderingContext2D;\r\n      const bgCanvas = document.getElementById('back') as HTMLCanvasElement;\r\n      this.bgContext = bgCanvas.getContext('2d') as CanvasRenderingContext2D;\r\n      this.gemDrawer = new GemDrawingService();\r\n\r\n      gemsCanvas.width = CanvasSize;\r\n      gemsCanvas.height = CanvasSize;\r\n      bgCanvas.width = CanvasSize;\r\n      bgCanvas.height = CanvasSize;\r\n      this.gemsContext.setTransform(1, 0, 0, 1, 0, 0);\r\n      this.bgContext.setTransform(1, 0, 0, 1, 0, 0);\r\n   }\r\n\r\n   drawAll(list: MapItem[]) {\r\n      list.forEach((item) => {\r\n         this.drawBorders(item);\r\n         this.clearCell(item);\r\n         this.drawMapItem(item);\r\n      });\r\n   }\r\n\r\n   async swap(first: MapItem, second: MapItem) {\r\n      const baseFirst = first.clone();\r\n      const baseSecond = second.clone();\r\n      const tempFirst = first.clone();\r\n      const tempSecond = second.clone();\r\n\r\n      const animationTime = 100;\r\n      const frames = (FPS * animationTime) / 1000;\r\n      for (let i = 0; i < animationTime; i += FrameTime) {\r\n         this.clearCell(baseFirst);\r\n         this.clearCell(baseSecond);\r\n         tempSecond.shift(Direction.Right, (baseFirst.x - baseSecond.x) / frames);\r\n         tempSecond.shift(Direction.Bottom, (baseFirst.y - baseSecond.y) / frames);\r\n         tempFirst.shift(Direction.Right, (baseSecond.x - baseFirst.x) / frames);\r\n         tempFirst.shift(Direction.Bottom, (baseSecond.y - baseFirst.y) / frames);\r\n         this.drawMapItem(tempSecond);\r\n         this.drawMapItem(tempFirst);\r\n         await this.wait(FrameTime);\r\n      }\r\n   }\r\n\r\n   async delete(list: MapItem[]) {\r\n      const animationTime = 150;\r\n      const frames = animationTime / FrameTime;\r\n      list.forEach((item) => this.fillBg(item));\r\n      for (let i = 0; i < frames; i++) {\r\n         list.forEach((item) => this.drawErrosion(item, i / frames));\r\n         await this.wait(FrameTime);\r\n      }\r\n   }\r\n\r\n   async fall(list: MapItem[]) {\r\n      while (list.length > 0) {\r\n         list.forEach((item) => {\r\n            item.fallFrom += 0.5;\r\n            const temp = item.clone();\r\n            temp.setY(item.fallFrom);\r\n            if (temp.y < 0) return;\r\n            this.clearCell(temp);\r\n            this.drawMapItem(temp);\r\n         });\r\n\r\n         list = list.filter((item) => item.y > item.fallFrom);\r\n         await this.wait(FrameTime);\r\n      }\r\n   }\r\n\r\n   drawMapItem(mapItem: MapItem) {\r\n      const absolutePoint = this.getAbsolutePosition(mapItem, CellPadding);\r\n      switch (mapItem.value) {\r\n         case Gem.Red:\r\n            return this.gemDrawer.drawRed(absolutePoint, this.gemsContext);\r\n         case Gem.Green:\r\n            return this.gemDrawer.drawGreen(absolutePoint, this.gemsContext);\r\n         case Gem.Blue:\r\n            return this.gemDrawer.drawBlue(absolutePoint, this.gemsContext);\r\n         case Gem.Purple:\r\n            return this.gemDrawer.drawPurple(absolutePoint, this.gemsContext);\r\n         case Gem.Yellow:\r\n            return this.gemDrawer.drawYellow(absolutePoint, this.gemsContext);\r\n      }\r\n   }\r\n\r\n   clearCell(point: Point) {\r\n      const borderWidth = 1;\r\n      const absolutePoint = this.getAbsolutePosition(point, -borderWidth);\r\n      this.gemsContext.clearRect(absolutePoint.x, absolutePoint.y, CellOuterSize + borderWidth * 2, CellOuterSize + borderWidth * 2);\r\n   }\r\n\r\n   drawErrosion(point: Point, percent: number) {\r\n      const padding = ((1 - percent) * CellInnerSize) / 2;\r\n      const absolutePoint = this.getAbsolutePosition(point, padding);\r\n      const cellInnerSize = CellOuterSize - padding * 2;\r\n      this.gemsContext.clearRect(absolutePoint.x, absolutePoint.y, cellInnerSize, cellInnerSize);\r\n   }\r\n\r\n   private fillBg(point: MapItem) {\r\n      this.bgContext.fillStyle = !point.bgValue ? '#eec' : '#fff';\r\n      this.fillCell(point);\r\n   }\r\n\r\n   private drawBorders(point: Point) {\r\n      this.bgContext.lineWidth = 1;\r\n      this.bgContext.strokeStyle = '#aaa';\r\n      const absolutePoint = this.getAbsolutePosition(point);\r\n      this.bgContext.strokeRect(absolutePoint.x, absolutePoint.y, CellOuterSize, CellOuterSize);\r\n   }\r\n\r\n   private fillCell(point: Point) {\r\n      const borderWidth = 1;\r\n      const cellInnerSize = CellOuterSize - borderWidth * 2;\r\n      const absolutePoint = this.getAbsolutePosition(point, borderWidth);\r\n      this.bgContext.fillRect(absolutePoint.x, absolutePoint.y, cellInnerSize, cellInnerSize);\r\n   }\r\n\r\n   private getAbsolutePosition(point: Point, padding = 0): Point {\r\n      const left = CellMargin + padding + CellOuterSize * point.x;\r\n      const top = CellMargin + padding + CellOuterSize * point.y;\r\n      return new Point(left, top);\r\n   }\r\n\r\n   private wait(ms: number) {\r\n      return new Promise((resolve) => setTimeout(resolve, ms));\r\n   }\r\n}\r\n","import { Gem } from '../enums/gem';\r\nimport Point from './point';\r\n\r\nexport default class MapItem extends Point {\r\n   value: Gem = Gem.Clear;\r\n   fallFrom = 0;\r\n   bgValue = true;\r\n\r\n   setRandomValue(): void {\r\n      const gems = this.allGems();\r\n      const randomValue = Math.floor(Math.random() * gems.length);\r\n      this.value = gems[randomValue];\r\n   }\r\n\r\n   allGems(): Gem[] {\r\n      return Object.keys(Gem)\r\n         .map((x) => +x)\r\n         .filter((item) => !isNaN(item) && item !== Gem.Clear)\r\n         .map((x) => x as Gem);\r\n   }\r\n\r\n   clone(): MapItem {\r\n      const newItem = new MapItem(this.x, this.y);\r\n      newItem.value = this.value;\r\n      newItem.bgValue = this.bgValue;\r\n      return newItem;\r\n   }\r\n\r\n   clear() {\r\n      this.value = Gem.Clear;\r\n   }\r\n\r\n   toggleBgValue() {\r\n      this.bgValue = false;\r\n   }\r\n}\r\n","import { Direction } from '../enums/direction';\r\nimport { Gem } from '../enums/gem';\r\nimport MapItem from './map-item';\r\nimport Point from './point';\r\n\r\nexport default class GameMap {\r\n   private items: MapItem[][] = [];\r\n   size: number;\r\n\r\n   constructor(size: number) {\r\n      this.size = size;\r\n   }\r\n\r\n   getAll(): MapItem[] {\r\n      return Array.prototype.concat.apply([], this.items);\r\n   }\r\n\r\n   swap(a: Point, b: Point): void {\r\n      const itemA = this.getItem(a);\r\n      const itemB = this.getItem(b);\r\n      const temp = itemA.value;\r\n      itemA.value = itemB.value;\r\n      itemB.value = temp;\r\n   }\r\n\r\n   getMatches(source: Point[]): Point[] {\r\n      const comboes = source.map((x) => this.getMatchesByPoint(x));\r\n      return Array.prototype.concat.apply([], comboes);\r\n   }\r\n\r\n   toggleBg(list: Point[]): void {\r\n      list.forEach((point) => this.getItem(point).toggleBgValue());\r\n   }\r\n\r\n   clear(list: Point[]): void {\r\n      list.forEach((point) => this.getItem(point).clear());\r\n   }\r\n\r\n   complement(): MapItem[] {\r\n      const complemented: MapItem[] = [];\r\n      for (let i = 0; i < this.size; i++) {\r\n         let minPos = -1;\r\n         for (let j = 0; j < this.size; j++) {\r\n            const current = this.items[i][this.size - j - 1];\r\n            if (current.value !== Gem.Clear) continue;\r\n            current.fallFrom = this.getFallFrom(current, minPos);\r\n            if (current.fallFrom < 0) {\r\n               minPos--;\r\n               current.setRandomValue();\r\n            } else {\r\n               const fallFromPoint = this.getItem(new Point(i, current.fallFrom));\r\n               current.value = fallFromPoint.value;\r\n               fallFromPoint.value = Gem.Clear;\r\n            }\r\n            complemented.push(current);\r\n         }\r\n      }\r\n      return complemented;\r\n   }\r\n\r\n   getFallFrom(point: Point, minPos: number): number {\r\n      const temp = point.clone();\r\n      do temp.shift(Direction.Top);\r\n      while (this.isPointInBounds(temp) && this.getItem(temp).value === Gem.Clear);\r\n      return temp.y < 0 ? minPos : temp.y;\r\n   }\r\n\r\n   fill(): void {\r\n      this.items = [];\r\n      for (let i = 0; i < this.size; i++) {\r\n         this.items.push([]);\r\n         for (let j = 0; j < this.size; j++) {\r\n            this.items[i].push(new MapItem(i, j));\r\n         }\r\n      }\r\n\r\n      for (let i = 0; i < this.size; i++) {\r\n         for (let j = 0; j < this.size; j++) {\r\n            const current = this.items[i][j];\r\n            do current.setRandomValue();\r\n            while (this.getMatchesByPoint(current).length !== 0);\r\n         }\r\n      }\r\n   }\r\n\r\n   getMatchesByPoint(current: Point): Point[] {\r\n      const allowDuplicates = 1;\r\n      const leftMatches = this.getMathcesByPointAndDirection(current, Direction.Left);\r\n      const rightMatches = this.getMathcesByPointAndDirection(current, Direction.Right);\r\n      const rowMatches = leftMatches.length + rightMatches.length > allowDuplicates ? leftMatches.concat(rightMatches) : [];\r\n      const topMatches = this.getMathcesByPointAndDirection(current, Direction.Top);\r\n      const bottomMatches = this.getMathcesByPointAndDirection(current, Direction.Bottom);\r\n      const colMatches = topMatches.length + bottomMatches.length > allowDuplicates ? topMatches.concat(bottomMatches) : [];\r\n      const totalMatches = rowMatches.length + colMatches.length > allowDuplicates ? rowMatches.concat(colMatches).concat(current) : [];\r\n      return totalMatches;\r\n   }\r\n\r\n   getMathcesByPointAndDirection(base: Point, dir: Direction): Point[] {\r\n      const matches: Point[] = [];\r\n      const temp = base.clone();\r\n      while (this.isPointInBounds(temp)) {\r\n         temp.shift(dir);\r\n         if (!this.match(base, temp)) break;\r\n         matches.push(temp.clone());\r\n      }\r\n      return matches;\r\n   }\r\n\r\n   isPointInBounds(point: Point): boolean {\r\n      return point.x >= 0 && point.y >= 0 && point.x < this.size && point.y < this.size;\r\n   }\r\n\r\n   match(a: Point, b: Point): boolean {\r\n      if (!this.isPointInBounds(a)) return false;\r\n      if (!this.isPointInBounds(b)) return false;\r\n      const itemA = this.getItem(a);\r\n      const itemB = this.getItem(b);\r\n      if (itemA.value === Gem.Clear) return false;\r\n      return itemA.value === itemB.value;\r\n   }\r\n\r\n   getItem(point: Point): MapItem {\r\n      return this.items[point.x][point.y];\r\n   }\r\n}\r\n","import DrawingService from './drawing/drawing.service';\r\nimport GameMap from './logic/game-map';\r\nimport Point from './logic/point';\r\nimport { CanvasSize, CellMargin, CellOuterSize, MatrixSize } from './constants';\r\nimport { Direction } from './enums/direction';\r\n\r\nexport default class GameCore {\r\n   private readonly drawingService: DrawingService;\r\n   private readonly boundaries: DOMRect;\r\n\r\n   lock = false;\r\n   matrix: GameMap;\r\n   focused: Point | null = null;\r\n\r\n   constructor() {\r\n      this.matrix = new GameMap(MatrixSize);\r\n      this.drawingService = new DrawingService();\r\n      this.matrix.fill();\r\n      this.drawingService.drawAll(this.matrix.getAll());\r\n\r\n      const gemsCanvas = document.getElementById('gems') as HTMLElement;\r\n      this.boundaries = gemsCanvas.getBoundingClientRect();\r\n      gemsCanvas.addEventListener('mousedown', (e: any) => this.pick(new Point(e.offsetX, e.offsetY)));\r\n      gemsCanvas.addEventListener('touchstart', (e: any) => this.pick(this.getPointFromToches(e)));\r\n      gemsCanvas.addEventListener('mousemove', (e: any) => this.move(new Point(e.offsetX, e.offsetY)));\r\n      gemsCanvas.addEventListener('touchmove', (e: any) => this.move(this.getPointFromToches(e)));\r\n      document.addEventListener('mouseup', () => this.cancel());\r\n      document.addEventListener('touchend', () => this.cancel());\r\n   }\r\n\r\n   getPointFromToches(event: any): Point {\r\n      const firstTouch = event.touches[0];\r\n      const parent = firstTouch.target;\r\n      const left = (window.innerWidth - parent.offsetWidth) / 2;\r\n      const top = (window.innerHeight - parent.offsetHeight) / 2;\r\n      const x = firstTouch.pageX - left;\r\n      const y = firstTouch.pageY - top;\r\n      return new Point(x, y);\r\n   }\r\n\r\n   pick(point: Point) {\r\n      if (this.lock) return;\r\n      this.focused = this.getCoordinates(point);\r\n      if (this.focused === null) return;\r\n      this.drawingService.drawMapItem(this.matrix.getItem(this.focused));\r\n   }\r\n\r\n   async move(point: Point) {\r\n      if (this.focused === null) return;\r\n      const temp = this.getCoordinates(point);\r\n      if (temp === null) return;\r\n      const first = this.focused.clone();\r\n      const second = this.getSecondPoint(first, temp);\r\n      if (second === null) return;\r\n      this.focused = null;\r\n\r\n      this.lock = true;\r\n      await this.drawingService.swap(this.matrix.getItem(first), this.matrix.getItem(second));\r\n      this.matrix.swap(this.matrix.getItem(first), this.matrix.getItem(second));\r\n      const matches = this.matrix.getMatches([first, second]);\r\n      if (matches.length === 0) {\r\n         await this.drawingService.swap(this.matrix.getItem(first), this.matrix.getItem(second));\r\n         this.matrix.swap(first, second);\r\n      } else {\r\n         await this.delete(matches);\r\n      }\r\n      this.lock = false;\r\n   }\r\n\r\n   async delete(matches: Point[]) {\r\n      while (matches.length > 0) {\r\n         const mapItems = matches.map((x) => this.matrix.getItem(x));\r\n         this.matrix.toggleBg(mapItems);\r\n         await this.drawingService.delete(mapItems);\r\n         this.matrix.clear(mapItems);\r\n         const complemented = this.matrix.complement();\r\n         matches = this.matrix.getMatches(complemented);\r\n         await this.drawingService.fall(complemented);\r\n      }\r\n   }\r\n\r\n   getSecondPoint(from: Point, to: Point): Point | null {\r\n      const dx = to.x - from.x;\r\n      const dy = to.y - from.y;\r\n      if (dx === 0 && dy === 0) return null;\r\n\r\n      const second = from.clone();\r\n      const direction = dx < 0 ? Direction.Left : dx > 0 ? Direction.Right : dy < 0 ? Direction.Top : Direction.Bottom;\r\n      second.shift(direction);\r\n      return second;\r\n   }\r\n\r\n   cancel(): void {\r\n      if (this.focused === null) return;\r\n      this.drawingService.drawMapItem(this.matrix.getItem(this.focused));\r\n      this.focused = null;\r\n   }\r\n\r\n   getCoordinates(offset: Point): Point | null {\r\n      const posX = ((offset.x - CellMargin) * CanvasSize) / this.boundaries.width;\r\n      const posY = ((offset.y - CellMargin) * CanvasSize) / this.boundaries.height;\r\n      const cellX = posX / CellOuterSize;\r\n      const cellY = posY / CellOuterSize;\r\n      if (cellX < 0 || cellY < 0 || cellX >= MatrixSize || cellY >= MatrixSize) return null;\r\n\r\n      return new Point(Math.floor(cellX), Math.floor(cellY));\r\n   }\r\n}\r\n","\nimport { Vue } from 'vue-class-component';\nimport GameCore from './game-core';\n\nexport default class Game extends Vue {\n   width = 300;\n   height = 300;\n\n   created() {\n      const max = window.innerWidth > window.innerHeight ? window.innerHeight : window.innerWidth;\n      this.width = max;\n      this.height = max;\n   }\n\n   mounted() {\n      const core = new GameCore();\n   }\n}\n","import { render } from \"./game.vue?vue&type=template&id=27d8b110&ts=true\"\nimport script from \"./game.vue?vue&type=script&lang=ts\"\nexport * from \"./game.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\Sharp\\\\match-three\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { Options, Vue } from 'vue-class-component';\nimport Game from './components/game.vue';\n\n@Options({\n   components: { Game },\n})\nexport default class App extends Vue {}\n","import { render } from \"./App.vue?vue&type=template&id=7b6bf1ce&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=7b6bf1ce&lang=scss\"\n\nimport exportComponent from \"D:\\\\Sharp\\\\match-three\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/* eslint-disable no-console */\r\n\r\nimport { register } from \"register-service-worker\";\r\n\r\nif (process.env.NODE_ENV === \"production\") {\r\n  register(`${process.env.BASE_URL}service-worker.js`, {\r\n    ready() {\r\n      console.log(\r\n        \"App is being served from cache by a service worker.\\n\" +\r\n          \"For more details, visit https://goo.gl/AFskqB\"\r\n      );\r\n    },\r\n    registered() {\r\n      console.log(\"Service worker has been registered.\");\r\n    },\r\n    cached() {\r\n      console.log(\"Content has been cached for offline use.\");\r\n    },\r\n    updatefound() {\r\n      console.log(\"New content is downloading.\");\r\n    },\r\n    updated() {\r\n      console.log(\"New content is available; please refresh.\");\r\n    },\r\n    offline() {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    },\r\n    error(error) {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    },\r\n  });\r\n}\r\n","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport \"./registerServiceWorker\";\n\ncreateApp(App).mount(\"#app\");\n"],"sourceRoot":""}