{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?b7e4","webpack:///./src/App.vue?634d","webpack:///./src/components/game.vue?5b01","webpack:///./src/components/enums/direction.ts","webpack:///./src/components/enums/gem.ts","webpack:///./src/components/constants.ts","webpack:///./src/components/gem-drawer.ts","webpack:///./src/components/logic/point.ts","webpack:///./src/components/drawer.ts","webpack:///./src/components/logic/map-item.ts","webpack:///./src/components/logic/game-map.ts","webpack:///./src/components/game-core.ts","webpack:///./src/components/game.vue","webpack:///./src/components/game.vue?9fee","webpack:///./src/App.vue","webpack:///./src/App.vue?8ecf","webpack:///./src/registerServiceWorker.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_ctx","_cache","$props","$setup","$data","$options","_component_game","_resolveComponent","_openBlock","_createBlock","_createElementBlock","id","style","_normalizeStyle","width","height","Direction","Gem","MatrixSize","CanvasSize","CellMargin","CellPadding","CellOuterSize","CellInnerSize","FPS","FrameTime","GemDrawer","basePoint","context","beginPath","fillStyle","moveTo","x","y","lineTo","fill","radius","Point","this","_x","_y","round","Math","dir","Left","Right","Top","Bottom","Drawer","canvas","document","getElementById","getContext","gemDrawer","setTransform","list","forEach","item","drawCellBg","drawMapItem","first","second","baseFirst","clone","baseSecond","tempFirst","tempSecond","animationTime","frames","wait","fillCell","fillBg","fallFrom","temp","setY","filter","mapItem","absolutePoint","getAbsolutePosition","Red","drawRed","Green","drawGreen","Blue","drawBlue","Purple","drawPurple","Yellow","drawYellow","point","drawBorders","strokeRect","padding","cellInnerSize","fillRect","left","top","ms","Promise","resolve","setTimeout","MapItem","Clear","gems","allGems","randomValue","floor","random","keys","map","isNaN","newItem","GameMap","size","items","Array","concat","a","b","itemA","getItem","itemB","source","comboes","getMatchesByPoint","complemented","minPos","current","getFallFrom","setRandomValue","fallFromPoint","isPointInBounds","allowDuplicates","leftMatches","getMathcesByPointAndDirection","rightMatches","rowMatches","topMatches","bottomMatches","colMatches","totalMatches","base","matches","match","GameCore","lock","focused","matrix","drawingService","drawAll","getAll","boundaries","getBoundingClientRect","addEventListener","e","pick","offsetX","offsetY","touches","pageX","target","offsetLeft","pageY","offsetTop","cancel","move","getCoordinates","getSecondPoint","swap","getMatches","delete","mapItems","complement","fall","from","to","dx","dy","direction","offset","posX","posY","cellX","cellY","Game","max","innerWidth","innerHeight","Vue","__exports__","App","Options","components","register","process","ready","console","log","registered","cached","updatefound","updated","offline","error","createApp","mount"],"mappings":"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","file":"js/app.7b8f0407.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/match-three/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=7b6bf1ce&lang=scss\"","import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_game = _resolveComponent(\"game\")!\n\n  return (_openBlock(), _createBlock(_component_game))\n}","import { normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"canvas\", {\n    id: \"map\",\n    style: _normalizeStyle({ width: _ctx.width + 'px', height: _ctx.height + 'px' })\n  }, null, 4))\n}","export enum Direction {\r\n   Left,\r\n   Top,\r\n   Right,\r\n   Bottom,\r\n}\r\n","export enum Gem {\r\n   Clear,\r\n   Red,\r\n   Green,\r\n   Blue,\r\n   Yellow,\r\n   Purple,\r\n}\r\n","export const MatrixSize = 8;\r\nexport const CanvasSize = 1000;\r\nexport const CellMargin = 10;\r\nexport const CellPadding = 10;\r\nexport const CellOuterSize = (1000 - CellMargin * 2) / MatrixSize;\r\nexport const CellInnerSize = CellOuterSize - CellPadding * 2;\r\nexport const FPS = 30;\r\nexport const FrameTime = 1000 / FPS;\r\n","import { CellInnerSize, CellPadding } from './constants';\r\nimport Point from './logic/point';\r\n\r\nexport default class GemDrawer {\r\n   drawRed(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      context.fillStyle = `#a25b5b`;\r\n      context.moveTo(basePoint.x + 4, basePoint.y + 5);\r\n      context.lineTo(basePoint.x + CellInnerSize - 4, basePoint.y + 5);\r\n      context.lineTo(basePoint.x + CellInnerSize / 2, basePoint.y + CellInnerSize);\r\n      context.fill();\r\n   }\r\n\r\n   drawGreen(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      context.fillStyle = `#3c8347`;\r\n      const radius = CellInnerSize / 4;\r\n      context.moveTo(basePoint.x + radius, basePoint.y);\r\n      context.lineTo(basePoint.x + CellInnerSize - radius, basePoint.y);\r\n      context.lineTo(basePoint.x + CellInnerSize, basePoint.y + radius);\r\n      context.lineTo(basePoint.x + CellInnerSize, basePoint.y + CellInnerSize - radius);\r\n      context.lineTo(basePoint.x + CellInnerSize - radius, basePoint.y + CellInnerSize);\r\n      context.lineTo(basePoint.x + radius, basePoint.y + CellInnerSize);\r\n      context.lineTo(basePoint.x, basePoint.y + CellInnerSize - radius);\r\n      context.lineTo(basePoint.x, basePoint.y + radius);\r\n      context.fill();\r\n   }\r\n\r\n   drawBlue(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      context.fillStyle = `#355a9a`;\r\n      const radius = CellInnerSize / 5;\r\n      context.moveTo(basePoint.x + CellInnerSize / 2, basePoint.y);\r\n      context.lineTo(basePoint.x + CellInnerSize - 10, basePoint.y + radius);\r\n      context.lineTo(basePoint.x + CellInnerSize - 10, basePoint.y + CellInnerSize - radius);\r\n      context.lineTo(basePoint.x + CellInnerSize / 2, basePoint.y + CellInnerSize);\r\n      context.lineTo(basePoint.x + 10, basePoint.y + CellInnerSize - radius);\r\n      context.lineTo(basePoint.x + 10, basePoint.y + radius);\r\n      context.fill();\r\n   }\r\n\r\n   drawPurple(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      context.fillStyle = `#6e3b7a`;\r\n      const radius = CellInnerSize / 5;\r\n      context.moveTo(basePoint.x + CellInnerSize / 2, basePoint.y);\r\n      context.lineTo(basePoint.x + CellInnerSize - 5, basePoint.y + radius + CellInnerSize / 7);\r\n      context.lineTo(basePoint.x + CellInnerSize - radius, basePoint.y + CellInnerSize - 3);\r\n      context.lineTo(basePoint.x + radius, basePoint.y + CellInnerSize - 3);\r\n      context.lineTo(basePoint.x + 5, basePoint.y + radius + CellInnerSize / 7);\r\n      context.fill();\r\n   }\r\n\r\n   drawYellow(basePoint: Point, context: CanvasRenderingContext2D) {\r\n      context.beginPath();\r\n      context.fillStyle = `#e8cb8e`;\r\n      context.moveTo(basePoint.x + CellInnerSize / 2, basePoint.y);\r\n      context.lineTo(basePoint.x + CellInnerSize, basePoint.y + CellInnerSize / 2);\r\n      context.lineTo(basePoint.x + CellInnerSize / 2, basePoint.y + CellInnerSize);\r\n      context.lineTo(basePoint.x, basePoint.y + CellInnerSize / 2);\r\n      context.fill();\r\n   }\r\n}\r\n","import { Direction } from '../enums/direction';\r\n\r\nexport default class Point {\r\n   private _x: number;\r\n   private _y: number;\r\n\r\n   get x(): number {\r\n      return this._x;\r\n   }\r\n\r\n   get y(): number {\r\n      return this._y;\r\n   }\r\n\r\n   constructor(x: number, y: number) {\r\n      this._x = x;\r\n      this._y = y;\r\n      this.round();\r\n   }\r\n\r\n   round() {\r\n      this._x = Math.round(this.x);\r\n      this._y = Math.round(this.y);\r\n   }\r\n\r\n   clone() {\r\n      return new Point(this.x, this.y);\r\n   }\r\n\r\n   shift(dir: Direction, value = 1) {\r\n      switch (dir) {\r\n         case Direction.Left:\r\n            this._x -= value;\r\n            return;\r\n         case Direction.Right:\r\n            this._x += value;\r\n            return;\r\n         case Direction.Top:\r\n            this._y -= value;\r\n            return;\r\n         case Direction.Bottom:\r\n            this._y += value;\r\n            return;\r\n      }\r\n   }\r\n\r\n   setY(value: number) {\r\n      this._y = value;\r\n   }\r\n}\r\n","import { CanvasSize, CellMargin, CellOuterSize, CellPadding, FPS, FrameTime, MatrixSize } from './constants';\r\nimport { Direction } from './enums/direction';\r\nimport { Gem } from './enums/gem';\r\nimport GemDrawer from './gem-drawer';\r\nimport MapItem from './logic/map-item';\r\nimport Point from './logic/point';\r\n\r\nexport default class Drawer {\r\n   private readonly canvas: HTMLCanvasElement;\r\n   private readonly context: CanvasRenderingContext2D;\r\n   private readonly gemDrawer: GemDrawer;\r\n\r\n   constructor() {\r\n      this.canvas = document.getElementById('map') as HTMLCanvasElement;\r\n      this.context = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n      this.gemDrawer = new GemDrawer();\r\n\r\n      this.canvas.width = CanvasSize;\r\n      this.canvas.height = this.canvas.width;\r\n      this.context.setTransform(1, 0, 0, 1, 0, 0);\r\n   }\r\n\r\n   drawAll(list: MapItem[]) {\r\n      list.forEach((item) => {\r\n         this.drawCellBg(item as Point);\r\n         this.drawMapItem(item);\r\n      });\r\n   }\r\n\r\n   async swap(first: MapItem, second: MapItem) {\r\n      const baseFirst = first.clone();\r\n      const baseSecond = second.clone();\r\n      const tempFirst = first.clone();\r\n      const tempSecond = second.clone();\r\n\r\n      const animationTime = 100;\r\n      const frames = (FPS * animationTime) / 1000;\r\n      for (let i = 0; i < animationTime; i += FrameTime) {\r\n         this.drawCellBg(baseFirst);\r\n         this.drawCellBg(baseSecond);\r\n         tempSecond.shift(Direction.Right, (baseFirst.x - baseSecond.x) / frames);\r\n         tempSecond.shift(Direction.Bottom, (baseFirst.y - baseSecond.y) / frames);\r\n         tempFirst.shift(Direction.Right, (baseSecond.x - baseFirst.x) / frames);\r\n         tempFirst.shift(Direction.Bottom, (baseSecond.y - baseFirst.y) / frames);\r\n         this.drawMapItem(tempSecond);\r\n         this.drawMapItem(tempFirst);\r\n         await this.wait(FrameTime);\r\n      }\r\n   }\r\n\r\n   async delete(list: MapItem[]) {\r\n      const animationTime = 200;\r\n      const frames = animationTime / FrameTime;\r\n      for (let i = 0; i < frames; i++) {\r\n         list.forEach((item) => {\r\n            this.context.fillStyle = `rgba(255,255,255,${1 / frames})`;\r\n            this.fillCell(item);\r\n         });\r\n         await this.wait(FrameTime);\r\n      }\r\n      list.forEach((item) => this.fillBg(item));\r\n   }\r\n\r\n   async fall(list: MapItem[]) {\r\n      while (list.length > 0) {\r\n         list.forEach((item) => {\r\n            item.fallFrom++;\r\n            const temp = item.clone();\r\n            temp.setY(item.fallFrom);\r\n            this.fillBg(temp);\r\n            this.drawMapItem(temp);\r\n         });\r\n\r\n         list = list.filter((item) => item.y > item.fallFrom);\r\n         await this.wait(FrameTime);\r\n      }\r\n   }\r\n\r\n   drawMapItem(mapItem: MapItem) {\r\n      const absolutePoint = this.getAbsolutePosition(mapItem, CellPadding);\r\n      this.context.beginPath();\r\n      switch (mapItem.value) {\r\n         case Gem.Red:\r\n            return this.gemDrawer.drawRed(absolutePoint, this.context);\r\n         case Gem.Green:\r\n            return this.gemDrawer.drawGreen(absolutePoint, this.context);\r\n         case Gem.Blue:\r\n            return this.gemDrawer.drawBlue(absolutePoint, this.context);\r\n         case Gem.Purple:\r\n            return this.gemDrawer.drawPurple(absolutePoint, this.context);\r\n         case Gem.Yellow:\r\n            return this.gemDrawer.drawYellow(absolutePoint, this.context);\r\n      }\r\n   }\r\n\r\n   drawCellBg(point: Point) {\r\n      this.drawBorders(point);\r\n      this.fillBg(point);\r\n   }\r\n\r\n   fillBg(point: Point) {\r\n      this.context.fillStyle = '#fff';\r\n      this.fillCell(point);\r\n   }\r\n\r\n   drawBorders(point: Point) {\r\n      const absolutePoint = this.getAbsolutePosition(point);\r\n      this.context.strokeRect(absolutePoint.x, absolutePoint.y, CellOuterSize, CellOuterSize);\r\n   }\r\n\r\n   fillCell(point: Point) {\r\n      const padding = 1;\r\n      const cellInnerSize = CellOuterSize - padding * 2;\r\n      const absolutePoint = this.getAbsolutePosition(point, padding);\r\n      this.context.fillRect(absolutePoint.x, absolutePoint.y, cellInnerSize, cellInnerSize);\r\n   }\r\n\r\n   getAbsolutePosition(point: Point, padding = 0): Point {\r\n      const left = CellMargin + padding + CellOuterSize * point.x;\r\n      const top = CellMargin + padding + CellOuterSize * point.y;\r\n      return new Point(left, top);\r\n   }\r\n\r\n   wait(ms: number) {\r\n      return new Promise((resolve) => setTimeout(resolve, ms));\r\n   }\r\n}\r\n","import { Gem } from '../enums/gem';\r\nimport Point from './point';\r\n\r\nexport default class MapItem extends Point {\r\n   value: Gem = Gem.Clear;\r\n   fallFrom = 0;\r\n\r\n   setRandomValue(): void {\r\n      const gems = this.allGems();\r\n      const randomValue = Math.floor(Math.random() * gems.length);\r\n      this.value = gems[randomValue];\r\n   }\r\n\r\n   allGems(): Gem[] {\r\n      return Object.keys(Gem)\r\n         .map((x) => +x)\r\n         .filter((item) => !isNaN(item) && item !== Gem.Clear)\r\n         .map((x) => x as Gem);\r\n   }\r\n\r\n   clone(): MapItem {\r\n      const newItem = new MapItem(this.x, this.y);\r\n      newItem.value = this.value;\r\n      return newItem;\r\n   }\r\n}\r\n","import { Direction } from '../enums/direction';\r\nimport { Gem } from '../enums/gem';\r\nimport MapItem from './map-item';\r\nimport Point from './point';\r\n\r\nexport default class GameMap {\r\n   private items: MapItem[][] = [];\r\n   size: number;\r\n\r\n   constructor(size: number) {\r\n      this.size = size;\r\n   }\r\n\r\n   getAll(): MapItem[] {\r\n      return Array.prototype.concat.apply([], this.items);\r\n   }\r\n\r\n   swap(a: Point, b: Point): void {\r\n      const itemA = this.getItem(a);\r\n      const itemB = this.getItem(b);\r\n      const temp = itemA.value;\r\n      itemA.value = itemB.value;\r\n      itemB.value = temp;\r\n   }\r\n\r\n   getMatches(source: Point[]): Point[] {\r\n      const comboes = source.map((x) => this.getMatchesByPoint(x));\r\n      return Array.prototype.concat.apply([], comboes);\r\n   }\r\n\r\n   delete(list: Point[]): void {\r\n      list.forEach((point) => (this.getItem(point).value = Gem.Clear));\r\n   }\r\n\r\n   complement(): MapItem[] {\r\n      const complemented: MapItem[] = [];\r\n      for (let i = 0; i < this.size; i++) {\r\n         let minPos = -1;\r\n         for (let j = 0; j < this.size; j++) {\r\n            const current = this.items[i][this.size - j - 1];\r\n            if (current.value !== Gem.Clear) continue;\r\n            current.fallFrom = this.getFallFrom(current, minPos);\r\n            if (current.fallFrom < 0) {\r\n               minPos--;\r\n               current.setRandomValue();\r\n            } else {\r\n               const fallFromPoint = this.getItem(new Point(i, current.fallFrom));\r\n               current.value = fallFromPoint.value;\r\n               fallFromPoint.value = Gem.Clear;\r\n            }\r\n            complemented.push(current);\r\n         }\r\n      }\r\n      return complemented;\r\n   }\r\n\r\n   getFallFrom(point: Point, minPos: number): number {\r\n      const temp = point.clone();\r\n      do temp.shift(Direction.Top);\r\n      while (this.isPointInBounds(temp) && this.getItem(temp).value === Gem.Clear);\r\n      return temp.y < 0 ? minPos : temp.y;\r\n   }\r\n\r\n   fill(): void {\r\n      this.items = [];\r\n      for (let i = 0; i < this.size; i++) {\r\n         this.items.push([]);\r\n         for (let j = 0; j < this.size; j++) {\r\n            this.items[i].push(new MapItem(i, j));\r\n         }\r\n      }\r\n\r\n      for (let i = 0; i < this.size; i++) {\r\n         for (let j = 0; j < this.size; j++) {\r\n            const current = this.items[i][j];\r\n            do current.setRandomValue();\r\n            while (this.getMatchesByPoint(current).length !== 0);\r\n         }\r\n      }\r\n   }\r\n\r\n   getMatchesByPoint(current: Point): Point[] {\r\n      const allowDuplicates = 1;\r\n      const leftMatches = this.getMathcesByPointAndDirection(current, Direction.Left);\r\n      const rightMatches = this.getMathcesByPointAndDirection(current, Direction.Right);\r\n      const rowMatches = leftMatches.length + rightMatches.length > allowDuplicates ? leftMatches.concat(rightMatches) : [];\r\n      const topMatches = this.getMathcesByPointAndDirection(current, Direction.Top);\r\n      const bottomMatches = this.getMathcesByPointAndDirection(current, Direction.Bottom);\r\n      const colMatches = topMatches.length + bottomMatches.length > allowDuplicates ? topMatches.concat(bottomMatches) : [];\r\n      const totalMatches = rowMatches.length + colMatches.length > allowDuplicates ? rowMatches.concat(colMatches).concat(current) : [];\r\n      return totalMatches;\r\n   }\r\n\r\n   getMathcesByPointAndDirection(base: Point, dir: Direction): Point[] {\r\n      const matches: Point[] = [];\r\n      const temp = base.clone();\r\n      while (this.isPointInBounds(temp)) {\r\n         temp.shift(dir);\r\n         if (!this.match(base, temp)) break;\r\n         matches.push(temp.clone());\r\n      }\r\n      return matches;\r\n   }\r\n\r\n   isPointInBounds(point: Point): boolean {\r\n      return point.x >= 0 && point.y >= 0 && point.x < this.size && point.y < this.size;\r\n   }\r\n\r\n   match(a: Point, b: Point): boolean {\r\n      if (!this.isPointInBounds(a)) return false;\r\n      if (!this.isPointInBounds(b)) return false;\r\n      const itemA = this.getItem(a);\r\n      const itemB = this.getItem(b);\r\n      if (itemA.value === Gem.Clear) return false;\r\n      return itemA.value === itemB.value;\r\n   }\r\n\r\n   getItem(point: Point): MapItem {\r\n      return this.items[point.x][point.y];\r\n   }\r\n}\r\n","import Drawer from './drawer';\r\nimport GameMap from './logic/game-map';\r\nimport Point from './logic/point';\r\nimport { CanvasSize, CellMargin, CellOuterSize, MatrixSize } from './constants';\r\nimport { Direction } from './enums/direction';\r\n\r\nexport default class GameCore {\r\n   private readonly drawingService: Drawer;\r\n   private readonly boundaries: DOMRect;\r\n\r\n   lock = false;\r\n   matrix: GameMap;\r\n   focused: Point | null = null;\r\n\r\n   constructor() {\r\n      this.matrix = new GameMap(MatrixSize);\r\n      this.drawingService = new Drawer();\r\n      this.matrix.fill();\r\n      this.drawingService.drawAll(this.matrix.getAll());\r\n\r\n      const map = document.getElementById('map') as HTMLElement;\r\n      this.boundaries = map.getBoundingClientRect();\r\n      map.addEventListener('mousedown', (e: any) => this.pick(new Point(e.offsetX, e.offsetY)));\r\n      map.addEventListener('touchstart', (e: any) => {\r\n         const first = e.touches[0];\r\n         const x = first.pageX - first.target.offsetLeft;\r\n         const y = first.pageY - first.target.offsetTop;\r\n         this.pick(new Point(x, y));\r\n      });\r\n\r\n      document.addEventListener('mouseup', () => this.cancel());\r\n      document.addEventListener('touchend', () => this.cancel());\r\n      map.addEventListener('mousemove', (e: any) => {\r\n         const point = new Point(e.offsetX, e.offsetY);\r\n         this.move(point);\r\n      });\r\n      map.addEventListener('touchmove', (e: any) => {\r\n         const first = e.touches[0];\r\n         const x = first.pageX - first.target.offsetLeft;\r\n         const y = first.pageY - first.target.offsetTop;\r\n         this.move(new Point(x, y));\r\n      });\r\n   }\r\n\r\n   pick(point: Point) {\r\n      if (this.lock) return;\r\n      this.focused = this.getCoordinates(point);\r\n      if (this.focused === null) return;\r\n      this.drawingService.drawMapItem(this.matrix.getItem(this.focused));\r\n   }\r\n\r\n   async move(point: Point) {\r\n      if (this.focused === null) return;\r\n      const temp = this.getCoordinates(point);\r\n      if (temp === null) return;\r\n      const first = this.focused.clone();\r\n      const second = this.getSecondPoint(first, temp);\r\n      if (second === null) return;\r\n      this.focused = null;\r\n\r\n      this.lock = true;\r\n      await this.drawingService.swap(this.matrix.getItem(first), this.matrix.getItem(second));\r\n      this.matrix.swap(this.matrix.getItem(first), this.matrix.getItem(second));\r\n      const matches = this.matrix.getMatches([first, second]);\r\n      if (matches.length === 0) {\r\n         await this.drawingService.swap(this.matrix.getItem(first), this.matrix.getItem(second));\r\n         this.matrix.swap(first, second);\r\n      } else {\r\n         await this.delete(matches);\r\n      }\r\n      this.lock = false;\r\n   }\r\n\r\n   async delete(matches: Point[]) {\r\n      while (matches.length > 0) {\r\n         const mapItems = matches.map((x) => this.matrix.getItem(x));\r\n         await this.drawingService.delete(mapItems);\r\n         this.matrix.delete(matches);\r\n         const complemented = this.matrix.complement();\r\n         await this.drawingService.fall(complemented);\r\n         matches = this.matrix.getMatches(complemented);\r\n      }\r\n   }\r\n\r\n   getSecondPoint(from: Point, to: Point): Point | null {\r\n      const dx = to.x - from.x;\r\n      const dy = to.y - from.y;\r\n      if (dx === 0 && dy === 0) return null;\r\n\r\n      const second = from.clone();\r\n      const direction = dx < 0 ? Direction.Left : dx > 0 ? Direction.Right : dy < 0 ? Direction.Top : Direction.Bottom;\r\n      second.shift(direction);\r\n      return second;\r\n   }\r\n\r\n   cancel(): void {\r\n      if (this.focused === null) return;\r\n      this.drawingService.drawMapItem(this.matrix.getItem(this.focused));\r\n      this.focused = null;\r\n   }\r\n\r\n   getCoordinates(offset: Point): Point | null {\r\n      const posX = ((offset.x - CellMargin) * CanvasSize) / this.boundaries.width;\r\n      const posY = ((offset.y - CellMargin) * CanvasSize) / this.boundaries.height;\r\n      const cellX = posX / CellOuterSize;\r\n      const cellY = posY / CellOuterSize;\r\n      if (cellX < 0 || cellY < 0 || cellX >= MatrixSize || cellY >= MatrixSize) return null;\r\n\r\n      return new Point(Math.floor(cellX), Math.floor(cellY));\r\n   }\r\n}\r\n","\nimport { Vue } from 'vue-class-component';\nimport GameCore from './game-core';\n\nexport default class Game extends Vue {\n   width = 300;\n   height = 300;\n\n   created() {\n      const max = window.innerWidth > window.innerHeight ? window.innerHeight : window.innerWidth;\n      this.width = max;\n      this.height = max;\n   }\n\n   mounted() {\n      const core = new GameCore();\n   }\n}\n","import { render } from \"./game.vue?vue&type=template&id=0077e0cc&ts=true\"\nimport script from \"./game.vue?vue&type=script&lang=ts\"\nexport * from \"./game.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\Sharp\\\\match-three\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { Options, Vue } from 'vue-class-component';\nimport Game from './components/game.vue';\n\n@Options({\n   components: { Game },\n})\nexport default class App extends Vue {}\n","import { render } from \"./App.vue?vue&type=template&id=7b6bf1ce&ts=true\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=7b6bf1ce&lang=scss\"\n\nimport exportComponent from \"D:\\\\Sharp\\\\match-three\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/* eslint-disable no-console */\n\nimport { register } from \"register-service-worker\";\n\nif (process.env.NODE_ENV === \"production\") {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready() {\n      console.log(\n        \"App is being served from cache by a service worker.\\n\" +\n          \"For more details, visit https://goo.gl/AFskqB\"\n      );\n    },\n    registered() {\n      console.log(\"Service worker has been registered.\");\n    },\n    cached() {\n      console.log(\"Content has been cached for offline use.\");\n    },\n    updatefound() {\n      console.log(\"New content is downloading.\");\n    },\n    updated() {\n      console.log(\"New content is available; please refresh.\");\n    },\n    offline() {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    },\n    error(error) {\n      console.error(\"Error during service worker registration:\", error);\n    },\n  });\n}\n","import { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport \"./registerServiceWorker\";\n\ncreateApp(App).mount(\"#app\");\n"],"sourceRoot":""}